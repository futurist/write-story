<meta charset="utf-8">
<script src="js/zepto.min.js"></script>
<style>
  html{
    font-size: 16px;
  }
  #generate{
    position: fixed;
    height: 1rem;
    right: 2rem;
    bottom: 2rem;
  }
</style>
<script>
  const BGCOLOR={
    n: 'lightgreen', 
    a: 'lightblue', 
    adv: 'lightcoral',
    v: 'lightyellow',
  }
  const dataArr = []
  async function genWords(method){
    return fetch('/api/rand?m='+(method||'')).then(res=>{
      // console.log(res.json())
      return res.json().then(data=>{
        dataArr.push(data)
        const ul = $('<ul>').css({
          background: BGCOLOR[method]
        })
        data.forEach(x=>ul.append($('<li>', {
          text: x.def,
        }).click(e=>{
          // console.log(x)
          lookup(x.word, method)
        })))
        $('#list').append(ul)
        ul[0].scrollIntoViewIfNeeded()
      })
    })
  }

  async function lookup(word, method){
    return fetch(`/api/lookup?m=${method||''}&w=${word}`).then(res=>{
      return res.json().then(data=>{
        console.log(data)
      })
    })
  }

  async function groupWords(){
    await genWords('a')
    await genWords('n')
    await genWords('adv')
    await genWords('v')
  }
</script>
<h1>generate words</h1>
<div id="generate">
  <button  onclick="groupWords()">一组</button>
  <button  onclick="genWords('n')">名词</button>
  <button  onclick="genWords('v')">动词</button>
  <button  onclick="genWords('a')">形容词</button>
  <button  onclick="genWords('adv')">副词</button>
</div>
<div id="list"></div>
